–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ —Ç–µ—Ä–º–∏–Ω–∞–º Kubernetes –∏ OpenShift
üîπ –û—Å–Ω–æ–≤—ã Kubernetes
Cluster (–ö–ª–∞—Å—Ç–µ—Ä) ‚Äî –≥—Ä—É–ø–ø–∞ —É–∑–ª–æ–≤ (Node), —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è Kubernetes.
Node (–£–∑–µ–ª) ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –≥–¥–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
Pod ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ). –ü–æ–¥ = –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä + —Å–µ—Ç—å + —Ç–æ–º–∞.
Namespace ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, dev, prod).
Deployment ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π Pod‚Äô–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è).
ReplicaSet ‚Äî –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod‚Äô–æ–≤.
Service ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Pod‚Äô–∞–º. –ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫. –¢–∏–ø—ã:
ClusterIP ‚Äì –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.
NodePort ‚Äì –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏ —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç –Ω–∞ Node.
LoadBalancer ‚Äì –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±–ª–∞—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º.
Ingress ‚Äî –ø—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç HTTP/HTTPS –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–∏—Å–∞–º (—á–∞—Å—Ç–æ —á–µ—Ä–µ–∑ Nginx/HAProxy/Traefik).
ConfigMap ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –≤ –≤–∏–¥–µ –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ.
Secret ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏).
Volume ‚Äî –¥–∏—Å–∫, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–π –∫ Pod‚Äô—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö).
StatefulSet ‚Äî –∫–∞–∫ Deployment, –Ω–æ –¥–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–ë–î, Kafka –∏ —Ç. –¥.), —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ Pod‚Äô–æ–≤.
DaemonSet ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Pod –∑–∞–ø—É—â–µ–Ω –Ω–∞ –∫–∞–∂–¥–æ–º Node (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞).
Job / CronJob ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.

üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ Kubernetes
Kubelet ‚Äî –∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º Node –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
kube-proxy ‚Äî –ø—Ä–æ–∫—Å–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.
etcd ‚Äî key-value –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤ –∫–æ—Ç–æ—Ä–æ–π Kubernetes —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞.
API Server ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã kubectl –∏–¥—É—Ç —Å—é–¥–∞).
Controller Manager ‚Äî —Å–ª–µ–¥–∏—Ç –∑–∞ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç —Å–∏—Å—Ç–µ–º—É –∫ –Ω—É–∂–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é.
Scheduler ‚Äî —Ä–µ—à–∞–µ—Ç, –Ω–∞ –∫–∞–∫–æ–π Node –∑–∞–ø—É—Å—Ç–∏—Ç—å Pod.

üîπ OpenShift (–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ Kubernetes)
OpenShift = Kubernetes + —É–¥–æ–±—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ DevOps.
–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
Project ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ Namespace –≤ Kubernetes, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏.
Route ‚Äî –∞–Ω–∞–ª–æ–≥ Ingress –≤ Kubernetes. –î–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏–∑–≤–Ω–µ —á–µ—Ä–µ–∑ HTTP/HTTPS.
Source-to-Image (S2I) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (–±–µ–∑ Dockerfile).
BuildConfig ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ Git-—Ä–µ–ø–æ).
ImageStream ‚Äî —Ç—Ä–µ–∫–µ—Ä –≤–µ—Ä—Å–∏–π Docker-–æ–±—Ä–∞–∑–æ–≤ –≤–Ω—É—Ç—Ä–∏ OpenShift.
DeploymentConfig ‚Äî –∞–Ω–∞–ª–æ–≥ Deployment, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ (—Ö—É–∫–∏, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è).
Operator ‚Äî —Å–ø–æ—Å–æ–± —É–ø–∞–∫–æ–≤–∞—Ç—å –∑–Ω–∞–Ω–∏–µ –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Postgres Operator —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ PostgreSQL).
ServiceAccount ‚Äî —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –¥–ª—è Pod‚Äô–æ–≤ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ API.
Role / RoleBinding ‚Äî –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º (RBAC).
ClusterRole / ClusterRoleBinding ‚Äî –ø—Ä–∞–≤–∞ –Ω–∞ –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä.


kubectl get pods                # —Å–ø–∏—Å–æ–∫ Pod‚Äô–æ–≤
kubectl describe pod POD_NAME   # –¥–µ—Ç–∞–ª–∏ Pod‚Äô–∞
kubectl get deployments         # —Å–ø–∏—Å–æ–∫ Deployment
kubectl logs POD_NAME           # –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
kubectl exec -it POD_NAME -- sh # –∑–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å Pod

oc get projects                 # —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ (namespaces)
oc new-app nginx                # –±—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
oc get routes                   # —Å–ø–∏—Å–æ–∫ Route
oc logs dc/APP_NAME             # –ª–æ–≥–∏ DeploymentConfig


–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã Helm
Chart
üì¶ –ü–∞–∫–µ—Ç Helm, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å–∞–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –µ–≥–æ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è Kubernetes.
–ê–Ω–∞–ª–æ–≥ –ø–∞–∫–µ—Ç–∞ –≤ apt/yum. –°–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ (YAML) –∏ —à–∞–±–ª–æ–Ω–æ–≤ (templates).
Repository (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
–•—Ä–∞–Ω–∏–ª–∏—â–µ Helm-—á–∞—Ä—Ç–æ–≤.
–ü—Ä–∏–º–µ—Ä: https://charts.bitnami.com/bitnami.
Release
–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —á–∞—Ä—Ç–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.
–ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å nginx –¥–≤–∞ —Ä–∞–∑–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ (web1, web2), —Ç–æ —ç—Ç–æ –±—É–¥—É—Ç –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö release.
Values
–§–∞–π–ª values.yaml —Ö—Ä–∞–Ω–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —á–∞—Ä—Ç–∞.
–ü–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –ø—Ä–∞–≤–∫–∏ —Å–∞–º–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤.
Template
–®–∞–±–ª–æ–Ω –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ Kubernetes –≤–Ω—É—Ç—Ä–∏ —á–∞—Ä—Ç–∞ (–æ–±—ã—á–Ω–æ –≤ templates/*.yaml).
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–∑—ã–∫ —à–∞–±–ª–æ–Ω–æ–≤ Go (Go Templates) –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π.
Notes
–§–∞–π–ª NOTES.txt –≤–Ω—É—Ç—Ä–∏ —á–∞—Ä—Ç–∞. –í—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é).
Hook
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π, –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è).
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç.–¥.
Subchart
–í–ª–æ–∂–µ–Ω–Ω—ã–π —á–∞—Ä—Ç –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–≥–æ —á–∞—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö).
Dependency
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —á–∞—Ä—Ç–∞ –æ—Ç –¥—Ä—É–≥–∏—Ö. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ Chart.yaml.

helm repo add bitnami https://charts.bitnami.com/bitnami   # –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
helm repo update                                          # –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ä—Ç–æ–≤
helm search repo nginx                                    # –ø–æ–∏—Å–∫ —á–∞—Ä—Ç–∞ –≤ —Ä–µ–ø–æ
helm install my-nginx bitnami/nginx                       # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Ä—Ç–∞
helm list                                                 # —Å–ø–∏—Å–æ–∫ release
helm upgrade my-nginx bitnami/nginx --set replicaCount=3  # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ release
helm rollback my-nginx 1                                  # –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
helm uninstall my-nginx                                   # —É–¥–∞–ª–∏—Ç—å release