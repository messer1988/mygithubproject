minikube start --driver=docker  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω —Å --driver=docker
kubectl get nodes ( –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ control-plane
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞—Ç—ã Ingress

minikube addons enable ingress
kubectl -n ingress-nginx get pods


minikube status

–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç!
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured


kubectl cluster-info
–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç!

Kubernetes control plane is running at https://127.0.0.1:53549
CoreDNS is running at https://127.0.0.1:53549/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

kubectl get pods -A

mac@macs-MacBook-Pro mygithubproject % kubectl get pods -A
NAMESPACE              NAME                                         READY   STATUS      RESTARTS       AGE
default                nginx-app-6c64c46fcf-6vsnz                   1/1     Running     0              12m
default                nginx-app-6c64c46fcf-zpbck                   1/1     Running     0              12m
ingress-nginx          ingress-nginx-admission-create-w9szj         0/1     Completed   0              83m
ingress-nginx          ingress-nginx-admission-patch-gs66v          0/1     Completed   0              83m
ingress-nginx          ingress-nginx-controller-9cc49f96f-9rhx4     1/1     Running     0              83m
kube-system            coredns-66bc5c9577-tvzg6                     1/1     Running     0              104m
kube-system            etcd-minikube                                1/1     Running     0              104m
kube-system            kube-apiserver-minikube                      1/1     Running     0              104m
kube-system            kube-controller-manager-minikube             1/1     Running     0              104m
kube-system            kube-proxy-2vfz7                             1/1     Running     0              104m
kube-system            kube-scheduler-minikube                      1/1     Running     0              104m
kube-system            storage-provisioner                          1/1     Running     1 (103m ago)   104m
kubernetes-dashboard   dashboard-metrics-scraper-77bf4d6c4c-fqvhb   1/1     Running     0              85m
kubernetes-dashboard   kubernetes-dashboard-855c9754f9-rstm4        1/1     Running     0              85m


helm version
version.BuildInfo{Version:"v3.19.0", GitCommit:"3d8990f0836691f0229297773f3524598f46bda6", GitTreeState:"clean", GoVersion:"go1.25.1"}
kubectl get ns

NAME                   STATUS   AGE
default                Active   34m
ingress-nginx          Active   12m
kube-node-lease        Active   34m
kube-public            Active   34m
kube-system            Active   34m
kubernetes-dashboard   Active   15m

–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ —à–∞–±–ª–æ–Ω–∞
helm template ./helm.nginx-app

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ß–∞—Ä—Ç–∞
helm install nginx-app .
kubectl get pods,svc,ingress


Python, –æ—Ç–ª–∏—á–Ω–æ ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –∂–∏–≤–æ–π, kube-system –≤ –Ω–æ—Ä–º–µ, ingress-nginx —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞:

‚ùå –í—Å–µ —Ç–≤–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ STATUS: ImagePullBackOff

–ê —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ:

‚ñ∂Ô∏è Kubernetes –ù–ï –ú–û–ñ–ï–¢ –°–ö–ê–ß–ê–¢–¨ –û–ë–†–ê–ó

python1988/nginx-app:<tag>
–Ω–∏ –≤ –æ–¥–Ω–æ–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–µ.

‚∏ª

üí• –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

–ü—Ä–∏—á–∏–Ω—ã –±—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ 3:

1Ô∏è‚É£ Docker Hub rate limit / –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
2Ô∏è‚É£ –ù–µ—Ç manifest –¥–ª—è —Ç–≤–æ–µ–≥–æ —Ç–µ–≥–∞
3Ô∏è‚É£ –í values.yaml —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ image.tag

–ò —è —É–∂–µ –≤–∏–∂—É –∫–æ—Ä–µ–Ω—å:
–¢–≤–æ–∏ –ø–æ–¥—ã —Ç—è–Ω—É—Ç –Ω–µ —Ç–µ —Ç–µ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—Ä–∞–ª Jenkins.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã —Å–µ–π—á–∞—Å –æ—Ç–ø—Ä–∞–≤–∏–ª:
python1988/nginx-app:51

–ê –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ —É —Ç–µ–±—è —á–∞—Å—Ç–∏—á–Ω–æ –≤–∏—Å—è—Ç:
nginx-app:865c85f87f
helm.nginx-app:7bd47c68fc


mac@macs-MacBook-Pro nginx-app % kubectl get pods -A
NAMESPACE              NAME                                         READY   STATUS             RESTARTS      AGE
default                helm.nginx-app-7bd47c68fc-dxtws              0/1     ImagePullBackOff   0             19m
default                helm.nginx-app-7bd47c68fc-s9bp6              0/1     ImagePullBackOff   0             19m
default                nginx-app-865c85f87f-jl2l7                   0/1     ImagePullBackOff   0             18m
default                nginx-app-865c85f87f-rh89j                   0/1     ImagePullBackOff   0             18m
ingress-nginx          ingress-nginx-admission-create-w9szj         0/1     Completed          0             12m
ingress-nginx          ingress-nginx-admission-patch-gs66v          0/1     Completed          0             12m
ingress-nginx          ingress-nginx-controller-9cc49f96f-9rhx4     1/1     Running            0             12m
kube-system            coredns-66bc5c9577-tvzg6                     1/1     Running            0             33m
kube-system            etcd-minikube                                1/1     Running            0             33m
kube-system            kube-apiserver-minikube                      1/1     Running            0             33m
kube-system            kube-controller-manager-minikube             1/1     Running            0             33m
kube-system            kube-proxy-2vfz7                             1/1     Running            0             33m
kube-system            kube-scheduler-minikube                      1/1     Running            0             33m
kube-system            storage-provisioner                          1/1     Running            1 (32m ago)   33m
kubernetes-dashboard   dashboard-metrics-scraper-77bf4d6c4c-fqvhb   1/1     Running            0             14m
kubernetes-dashboard   kubernetes-dashboard-855c9754f9-rstm4        1/1     Running            0             14m

üìå –®–ê–ì 1 ‚Äî –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –æ–±—Ä–∞–∑—ã —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å –≤ Docker Hub
docker pull python1988/nginx-app:latest
docker pull python1988/nginx-app:37
docker pull python1988/nginx-app:51


üìå –®–ê–ì 2 ‚Äî –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –æ–±—Ä–∞–∑—ã –ø—ã—Ç–∞–µ—Ç—Å—è –∫–∞—á–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä
kubectl describe pod nginx-app-6c64c46fcf-6vsnz -n default | grep Image:

–í—ã–≤–æ–¥:
Image:         python1988/nginx-app:58


üìå –®–ê–ì 3 ‚Äî –ü—Ä–æ–≤–µ—Ä–∏–º values.yaml –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

helm get values nginx-app -n default
–í—ã–≤–æ–¥:
USER-SUPPLIED VALUES:
fullnameOverride: nginx-app
image:
  repository: python1988/nginx-app
  tag: 58

üìå –®–ê–ì 4 ‚Äî –ü—Ä–æ–≤–µ—Ä–∏–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å kubeconfig, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Helm –≤ Jenkins
export KUBECONFIG=/Users/mac/.jenkins/workspace/helm/kubeconfig
kubectl get pods -A


üî• –ö–æ–º–∞–Ω–¥–∞ ‚Ññ1: —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π Deployment
kubectl delete pod helm.nginx-app-7bd47c68fc-dxtws -n default
kubectl delete pod helm.nginx-app-7bd47c68fc-s9bp6 -n default

–ï—Å–ª–∏ –º—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏ –∫–∞–∫–∏–µ –ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ helm —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
2Ô∏è‚É£ –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º Helm upgrade –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
helm upgrade --install nginx-app helm/nginx-app -n default


–ü—Ä–æ–≤–µ—Ä–∏—Ç—å namespace
kubectl get ns
–ö–∞–∫ —É–∑–Ω–∞—Ç—å namespace —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
kubectl config get-contexts

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ namespace
kubectl get all -n default

–ß—Ç–æ —Ç–∞–∫–æ–µ default namespace
default ‚Äî —ç—Ç–æ namespace –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
–ï—Å–ª–∏ —Ç—ã –ù–ï —É–∫–∞–∑–∞–ª namespace, Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç default.




–ó–∞—á–µ–º –Ω—É–∂–Ω—ã namespace (–ø—Ä–∞–∫—Ç–∏–∫–∞)
–ó–∞–¥–∞—á–∞ –ü—Ä–∏–º–µ—Ä
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π dev, stage, prod
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥    team-a, team-b
–°–µ—Ä–≤–∏—Å—ã              monitoring, logging, istio-system
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å         —Ä–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
–õ–∏–º–∏—Ç—ã                  –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ CPU / RAM

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ namespace (–≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å)
Namespace              –î–ª—è —á–µ–≥–æ
default                –æ–±—ã—á–Ω—ã–µ workload‚Äô—ã
kube-system            —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã k8s
kube-public            –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
kube-node-lease        heartbeat –Ω–æ–¥
istio-system           Istio (–µ—Å–ª–∏ –µ—Å—Ç—å)
monitoring             Prometheus, Grafana



–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ namespace
Namespace –ù–ï —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ, –æ–Ω –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.
–í namespace –º–æ–≥—É—Ç –±—ã—Ç—å:
	‚Ä¢	Pods
	‚Ä¢	Deployments
	‚Ä¢	Services
	‚Ä¢	ConfigMaps
	‚Ä¢	Secrets
	‚Ä¢	Ingress
	‚Ä¢	Jobs / CronJobs
	‚Ä¢	Roles / RoleBindings



1) –ë—ã—Å—Ç—Ä–æ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ —É–∂–µ –ø–æ—Å—Ç–∞–≤–∏–ª Istio (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
helm list -A | grep -i istio

kubectl get crd wasmplugins.extensions.istio.io -o jsonpath='{.metadata.labels}{"\n"}{.metadata.annotations}{"\n"}'

kubectl get pods -n istio-system

2) –£–î–ê–õ–ï–ù–ò–ï –ò –ü–ï–†–ï–£–°–¢–ê–ù–û–í–ö–ê ISTIO

–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å—Ç—å –ª–∏ sidecar-injection –∏ istio —Ä–µ—Å—É—Ä—Å—ã
kubectl get ns --show-labels | grep istio-injection
kubectl get mutatingwebhookconfigurations | grep -i istio || true
kubectl get validatingwebhookconfigurations | grep -i istio || true

–£–¥–∞–ª—è–µ–º Helm-—Ä–µ–ª–∏–∑—ã Istio (–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)
1.1 –£–¥–∞–ª–∏—Ç—å istiod
helm uninstall istiod -n istio-system

1.2 –£–¥–∞–ª–∏—Ç—å istio-base
helm uninstall istio-base -n istio-system

–ü—Ä–æ–≤–µ—Ä–∫–∞
helm list -n istio-system
kubectl get pods -n istio-system

2) –£–¥–∞–ª—è–µ–º namespace istio-system
kubectl delete ns istio-system

–ü—Ä–æ–≤–µ—Ä–∫–∞:
kubectl get ns | grep istio-system || echo "istio-system removed"

3) –ß–∏—Å—Ç–∏–º CRD Istio (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ)
Istio CRD ‚Äî cluster-wide, –æ–Ω–∏ —á–∞—Å—Ç–æ –æ—Å—Ç–∞—é—Ç—Å—è (–∏ –∫–∞–∫ —Ä–∞–∑ –∏–∑-–∑–∞ –Ω–∏—Ö —É —Ç–µ–±—è –±—ã–ª–∞ –æ—à–∏–±–∫–∞).

–°–ø–∏—Å–æ–∫ CRD Istio:
kubectl get crd | grep -i istio

–£–¥–∞–ª—è–µ–º –≤—Å–µ CRD Istio –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
kubectl get crd | grep -E 'istio\.io|istio' | awk '{print $1}' > /tmp/istio_crds.txt
cat /tmp/istio_crds.txt
xargs -r kubectl delete crd < /tmp/istio_crds.txt

–ü—Ä–æ–≤–µ—Ä–∫–∞
kubectl get crd | grep -i istio || echo "No istio CRDs"

4) –£–¥–∞–ª—è–µ–º webhooks Istio (–µ—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å)
kubectl get mutatingwebhookconfigurations | grep -i istio | awk '{print $1}' | xargs -r kubectl delete mutatingwebhookconfiguration
kubectl get validatingwebhookconfigurations | grep -i istio | awk '{print $1}' | xargs -r kubectl delete validatingwebhookconfiguration

5) –£–¥–∞–ª—è–µ–º ClusterRoles / ClusterRoleBindings Istio (–ø–æ –∂–µ–ª–∞–Ω–∏—é, –Ω–æ –ª—É—á—à–µ –ø–æ—á–∏—Å—Ç–∏—Ç—å)
kubectl get clusterrole | grep -i istio | awk '{print $1}' | xargs -r kubectl delete clusterrole
kubectl get clusterrolebinding | grep -i istio | awk '{print $1}' | xargs -r kubectl delete clusterrolebinding

6) –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Äú—á–∏—Å—Ç–æ –ª–∏‚Äù
kubectl get ns | grep -i istio || echo "No istio namespaces"
kubectl get crd | grep -i istio || echo "No istio CRDs"
kubectl get mutatingwebhookconfigurations | grep -i istio || echo "No istio mutating webhooks"
kubectl get validatingwebhookconfigurations | grep -i istio || echo "No istio validating webhooks"




